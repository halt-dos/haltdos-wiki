"use strict";(self.webpackChunkhaltdos_wiki=self.webpackChunkhaltdos_wiki||[]).push([[72724],{3905:(e,t,r)=>{r.d(t,{Zo:()=>h,kt:()=>m});var n=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var i=n.createContext({}),c=function(e){var t=n.useContext(i),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},h=function(e){var t=c(e.components);return n.createElement(i.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,h=s(e,["components","mdxType","originalType","parentName"]),p=c(r),d=a,m=p["".concat(i,".").concat(d)]||p[d]||u[d]||o;return r?n.createElement(m,l(l({ref:t},h),{},{components:r})):n.createElement(m,l({ref:t},h))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,l=new Array(o);l[0]=d;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s[p]="string"==typeof e?e:a,l[1]=s;for(var c=2;c<o;c++)l[c]=r[c];return n.createElement.apply(null,l)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},77911:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>d,frontMatter:()=>l,metadata:()=>i,toc:()=>h});r(67294);var n=r(3905);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a.apply(this,arguments)}function o(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}const l={sidebar_position:3},s="Health Monitors",i={unversionedId:"enterprise/waf/listener/loadBalancing/monitor",id:"enterprise/waf/listener/loadBalancing/monitor",title:"Health Monitors",description:"Continually test your upstream servers, avoid the servers that have failed, and gracefully add the recovered servers into the server group.",source:"@site/docs/enterprise/waf/listener/loadBalancing/monitor.md",sourceDirName:"enterprise/waf/listener/loadBalancing",slug:"/enterprise/waf/listener/loadBalancing/monitor",permalink:"/enterprise/waf/listener/loadBalancing/monitor",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"waf_sidebar",previous:{title:"Load Balancing",permalink:"/enterprise/waf/listener/loadBalancing/serverGroup/loadbalancing"},next:{title:"Caching",permalink:"/enterprise/waf/listener/loadBalancing/caching"}},c={},h=[{value:"Overview",id:"overview",level:3},{value:"How to Use:",id:"how-to-use",level:3},{value:"Description",id:"description",level:3},{value:"<strong>Monitor Name</strong>",id:"monitor-name",level:5},{value:"<strong>Enable Health Check</strong>",id:"enable-health-check",level:5},{value:"<strong>Health Check Interval</strong>",id:"health-check-interval",level:5},{value:"<strong>Fail Threshold</strong>",id:"fail-threshold",level:5},{value:"<strong>Pass Threshold</strong>",id:"pass-threshold",level:5},{value:"<strong>Health Check Type</strong>",id:"health-check-type",level:5},{value:"<strong>Port</strong>",id:"port",level:5},{value:"<strong>Health Script</strong>",id:"health-script",level:5},{value:"<strong>SNMP Version</strong>",id:"snmp-version",level:5},{value:"<strong>SNMP Community</strong>",id:"snmp-community",level:5}],p={toc:h},u="wrapper";function d(e){var{components:t}=e,l=o(e,["components"]);return(0,n.kt)(u,a({},p,l,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",a({},{id:"health-monitors"}),"Health Monitors"),(0,n.kt)("p",null,"Continually test your upstream servers, avoid the servers that have failed, and gracefully add the recovered servers into the server group."),(0,n.kt)("hr",null),(0,n.kt)("h3",a({},{id:"overview"}),"Overview"),(0,n.kt)("p",null,"Monitoring provides a comprehensive overview of the status and performance of the Server Group and/or individual real servers inside the server group. If a monitor is attached to a server group, then it will get applied to all the servers inside that group automatically. If a monitor is attached to a particular server then it will override the configuration of the server-group monitor. Health Checks computes an overall health state for each upstream server in the listener. Backend(upstream) that responds successfully for the configured number of times is considered healthy. Backend(upstream) that fails to respond successfully for a separate number of times is unhealthy."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Monitors",src:r(28768).Z,width:"1910",height:"900"})),(0,n.kt)("h3",a({},{id:"how-to-use"}),"How to Use:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Go to WAF > Listeners > Monitors"),(0,n.kt)("li",{parentName:"ol"},"Click on Add Monitor"),(0,n.kt)("li",{parentName:"ol"},"Click on the monitor name to configure the Health Check and click on Save changes"),(0,n.kt)("li",{parentName:"ol"},"Now go to WAF > Listener > Server Group "),(0,n.kt)("li",{parentName:"ol"},"Add the Monitor to the server group / or server as required  ")),(0,n.kt)("h3",a({},{id:"description"}),"Description"),(0,n.kt)("h5",a({},{id:"monitor-name"}),(0,n.kt)("strong",{parentName:"h5"},"Monitor Name")),(0,n.kt)("p",null,"Specify a user-friendly name to monitor.  "),(0,n.kt)("pre",null,(0,n.kt)("code",a({parentName:"pre"},{}),"Accepted values: Integer\n\nDefault: 1  \n")),(0,n.kt)("h5",a({},{id:"enable-health-check"}),(0,n.kt)("strong",{parentName:"h5"},"Enable Health Check")),(0,n.kt)("p",null,"Enable to periodically check the health of upstream servers by sending special health\u2011check requests to each server and verifying the correct response.  "),(0,n.kt)("pre",null,(0,n.kt)("code",a({parentName:"pre"},{}),"Accepted values: Enabled / Disbaled\n\nDefault: Disabled \n")),(0,n.kt)("h5",a({},{id:"health-check-interval"}),(0,n.kt)("strong",{parentName:"h5"},"Health Check Interval")),(0,n.kt)("p",null,"Set the seconds, say 10, then every 10 seconds WAF sends a request for \u201c/\u201d to each server/server group. If any communication error or timeout occurs (the server responds with a status code other than the expected code) the health check fails. The server is marked as unhealthy, and WAF does not send client requests to it (if attached to server group) until it once again passes a health check."),(0,n.kt)("pre",null,(0,n.kt)("code",a({parentName:"pre"},{}),"Accepted values: Integer\n\nMax: 17280\n\nMin: 0\n\nDefault: 10  \n\nMetrics: Seconds\n")),(0,n.kt)("h5",a({},{id:"fail-threshold"}),(0,n.kt)("strong",{parentName:"h5"},"Fail Threshold")),(0,n.kt)("p",null,"Sets the number of failed attempts that must occur during the heath check interval period for the server to be marked unavailable (default is 1 attempt).  "),(0,n.kt)("pre",null,(0,n.kt)("code",a({parentName:"pre"},{}),"Accepted values: Integer\n\nMax: 17280\n\nMin: 0\n\nDefault: 10  \n\nMetrics: Seconds\n")),(0,n.kt)("h5",a({},{id:"pass-threshold"}),(0,n.kt)("strong",{parentName:"h5"},"Pass Threshold")),(0,n.kt)("p",null,"Sets the number of passes that must occur during the heath check interval period for the server to be marked available (default is 1 attempt). If set as 2, then the server must pass two consecutive checks to be marked as healthy again instead of the default one.  "),(0,n.kt)("pre",null,(0,n.kt)("code",a({parentName:"pre"},{}),"Accepted values: Integer\n\nMax: 10000\n\nMin: 0\n\nDefault: 1\n")),(0,n.kt)("h5",a({},{id:"health-check-type"}),(0,n.kt)("strong",{parentName:"h5"},"Health Check Type")),(0,n.kt)("pre",null,(0,n.kt)("code",a({parentName:"pre"},{}),"Accepted values: TCP / HTTP / SSL HELLO / HTTPS / ICMP / SNMP / DNS / Script\n\nDefault: TCP  \n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"TCP"),":\nHealth check attempts to open a TCP connection to the server on the specified port (which are specified in the configuration file)."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"SSL HELLO"),":\nHealth check sends SSL handshake with the server, if failed to do SSL handshake then we make that server as unhealthy."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"HTTP"),":\nHealth check sends HTTP request, if unable to receive response, then we make that server unhealthy."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"HTTPS"),":\nHealth check sends HTTPS request, if unable to receive response, then we make that server as unhealthy.  "),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"DNS"),":\nHealth check sends DNS query, if unable to receive response, then we make that server as unhealthy.  "),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"ICMP"),":\nHealth check sends ICMP ping, if unable to receive response, then we make that server as unhealthy.  "),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"SNMP"),":\nHealth check sends SNMP query, if unable to receive response, then we make that server as unhealthy. For SNMP, measurement can be based on CPU, RAM or both. User will also need to specify maximum threshold (percentage) for marking the health of the server as up. SNMP v2,v2c and v3 are supported.  "),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Custom Script"),":\nHealth check runs custom script (shell script, perl script or Lua script). The script is executed with parameters of server IP and server Port. If the script responds with 1, heath check is passed. If the script responds with 0, we make that server as unhealthy  ")),(0,n.kt)("h5",a({},{id:"port"}),(0,n.kt)("strong",{parentName:"h5"},"Port")),(0,n.kt)("p",null,"Specify a new port with the port parameter"),(0,n.kt)("pre",null,(0,n.kt)("code",a({parentName:"pre"},{}),"Accepted values: Integer\n\nDefault: Blank\n")),(0,n.kt)("h5",a({},{id:"health-script"}),(0,n.kt)("strong",{parentName:"h5"},"Health Script")),(0,n.kt)("p",null,"Select your custom health check script"),(0,n.kt)("pre",null,(0,n.kt)("code",a({parentName:"pre"},{}),"Accepted values: Add Script\n\nDefault: Blank\n")),(0,n.kt)("h5",a({},{id:"snmp-version"}),(0,n.kt)("strong",{parentName:"h5"},"SNMP Version")),(0,n.kt)("p",null,"Specify SNMP version for monitoring"),(0,n.kt)("pre",null,(0,n.kt)("code",a({parentName:"pre"},{}),"Accepted values: SNMP v1 / SNMP v2 / SNMP v2c / SNMP v3\n\nDefault: Blank\n")),(0,n.kt)("h5",a({},{id:"snmp-community"}),(0,n.kt)("strong",{parentName:"h5"},"SNMP Community")),(0,n.kt)("p",null,"Specify SNMP Community"),(0,n.kt)("pre",null,(0,n.kt)("code",a({parentName:"pre"},{}),"Accepted values: String\n\nDefault: Public\n")))}d.isMDXComponent=!0},28768:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/monitors-15b2b9e872cd3765b940c35ac409182a.png"}}]);